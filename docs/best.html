<script>
fetch('ai-agents.json')
  .then(response => response.json())
  .then(data => {
    data.sort((a, b) => Number(a.order) - Number(b.order));

    const tableBody = document.getElementById('agentsTableBody');
    tableBody.innerHTML = ''; // Clear table first

    data.forEach(agent => {
      const row = `
        <tr>
          <td><a href="${agent.url}" target="_blank">${agent.name}</a></td>
          <td>${agent.description}</td>
          <td>${agent.category}</td>
        </tr>
      `;
      tableBody.innerHTML += row;
    });

    $('#agentsTable').DataTable({
      "pageLength": 100,
      "order": []  // Explicitly disable initial sorting by DataTables
    });
  })
  .catch(error => console.error('Error loading JSON:', error));
</script>
